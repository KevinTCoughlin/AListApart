{exp:ifelse parse="inward"}

{if !logged_in}

	{redirect='tools/log-in'}

{if:else}

{global-page-top}

<title>A List Apart Profile Editor</title>

</head>

<body data-xid="{XID_HASH}">

{primary-logo}

{global-nav}

{current-user-info}

<div role="main" class="main-wrapper single-column-display">

	<div class="col-holder">

		<div class="main-content tools">

		<h1 class="basic-title">The ALA Profile Editor</h1>
		
		<p><a href="/">Home page</a> ∙ <a href="{exp:freemember:logout_url}">Log out</a></p>
		
		<hr class="spacer large">

		{exp:social_login:add_userdata return="SAME_PAGE" id="userdata_form"}

		<fieldset>

			<legend class="social-form form-heading">Did you sign up using a social account?</legend>

			<p>We might need some more info before you can edit your profile:</p>
			
			{email_block}
			<p>
				<label for="email">We need your email address (for lost password requests):</label>
				<input 
					type="email"
					id="email" 
					name="email"
					aria-describedby="email_error" 
					value="{email}"
					data-validate="onblur"
					data-type="email"
					data-isvalid=""
					data-error="are you sure this is your email address?"
					required>
			</p>
			{/email_block}

			{password_block}
			<p class="password-field">
				<label for="password">Password: required</label>
				<input 
					type="password"
					id="password" 
					name="password"
					value=""
					aria-describedby="password_error"
					data-validate="onblur"
					data-type="any"
					data-isvalid=""
					data-error="what's your new password?"
					required>
				<span class="note">Make it good.</span>
			</p>

			<p class="password-field">
				<label for="password_confirm">Password Confirmation: required</label>
				<input
					type="password"
					id="password_confirm"
					name="password_confirm"
					value=""
					aria-describedby="password_confirm_error"
					data-validate="onblur"
					data-type="matching"
					data-mustmatch="password"
					data-isvalid="yes"
					data-error="this needs to match the previous field."
					required>
				<span class="note">Make it the same.</span>
			</p>
			{/password_block}

			<p class="screen-reader">
				<label for="honeepot">Don't put anything here</label>
				<input
					type="text"
					id="honeepot"
					name="honeepot">
			</p>
				
			<p>
				<input 
					type="submit" 
					name="submit" 
					value="Submit" 
					class="button primary">
			</p>

			<hr class="spacer large">
		
		</fieldset>

		{/exp:social_login:add_userdata}

		{exp:user:edit
			dynamic="off"
			return="/edit/profile/"
			form:class="perfect-form-demo"}

			<fieldset>

				<legend class="form-heading">The Basics</legend>

				<p>
					<label for="username">Username:</label>
					<input 
						type="text" 
						id="username" 
						name="username" 
						value="{username}" 
						readonly>
					<span class="note">Readonly. If you must change this, get in touch.</span>
				</p>

				<p>
					<label for="email">Email:</label>
					<input 
						type="email" 
						id="email" 
						name="email" 
						aria-describedby="email_error"  
						value="{email}"
						data-validate="onblur"
						data-type="email"
						data-isvalid=""
						data-error="are you sure this is your email address?"
						required>
				</p>

				<p>
					<label for="screen_name">Visible name:</label>	
					<input 
						type="text" 
						id="screen_name" 
						name="screen_name" 
						value="{screen_name}" 
						aria-describedby="screen_name_error" 
						data-validate="onblur"
						data-type="any"
						data-isvalid=""
						data-error="how do you want to be identified on the site?"
						required>
				</p>

				{if group_id == "1" OR group_id == "6" OR group_id == "7" OR group_id == "10"}

				<p>
					<label for="first_name">First name:</label>	
					<input type="text"
						id="first_name"
						name="first_name"
						value="{first_name}"
						aria-describedby="first_name_error" 
						data-validate="onblur"
						data-type="any"
						data-isvalid=""
						data-error="what's your first name?"
						required>
				</p>

				<p>
					<label for="last_name">Last name:</label>
					<input 
						type="text"
						id="last_name" 
						aria-describedby="last_name_error" 
						name="last_name" 
						value="{last_name}"
						data-validate="onblur"
						data-type="any"
						data-isvalid=""
						data-error="what's your last name?"
						required>
				</p>

				{/if}

				<p class="password-field">
					<label for="password">Password: required</label>
					<input 
						type="password"
						id="password" 
						name="password"
						value=""
						aria-describedby="password_error"
						data-validate="onblur"
						data-type="any"
						data-isvalid=""
						data-error="what's your new password?"
						required>
					<span class="note">Make it good.</span>
				</p>

				<p class="password-field">
					<label for="password_confirm">Password Confirmation: required</label>
					<input
						type="password"
						id="password_confirm"
						name="password_confirm"
						value=""
						aria-describedby="password_confirm_error"
						data-validate="onblur"
						data-type="matching"
						data-mustmatch="password"
						data-isvalid="yes"
						data-error="this needs to match the previous field."
						required>
					<span class="note">Make it the same.</span>
				</p>

				<p class="password-field">
					<label for="current_password">Submit your current password to continue: (<a href="/tools/forgot-password">forgotten it?</a>)</label>
					<input 
						type="password"
						id="current_password" 
						name="current_password"
						aria-describedby="current_password_error"  
						data-validate="onblur"
						data-type="any"
						data-isvalid=""
						data-error="for your security, we need your current password"
						required>
				</p>

				</fieldset>

				<p class="screen-reader">
					<label for="honeepot">Don't put anything here</label>
					<input
						type="text"
						id="honeepot"
						name="honeepot">
				</p>
				
				<p>
					<input 
						type="submit" 
						name="submit" 
						value="Submit" 
						class="button primary">
				</p>

		{/exp:user:edit}

		<hr class="spacer large">

		{exp:user:edit
			dynamic="off"
			return="/edit/profile/"
			form:class="perfect-form-demo"}

			<fieldset>

				<legend class="form-heading">Social Stuff</legend>

				<p>
					<label for="personal_url">Personal URL:</label>
					<input 
						type="text" 
						id="personal_url" 
						name="url" 
						value="{url}">
					<span class="note">no http, no trailing slash</span>
				</p>
				
				<p>
					<label for="twitter_username">Twitter:</label>
					<input 
						type="text" 
						id="twitter_username" 
						name="twitter_username" 
						value="{twitter}">
					<span class="note">username only, no @</span>
				</p>
				
				<p>
					<label for="facebook_username">Facebook:</label>	
					<input 
						type="text" 
						id="facebook_username" 
						name="facebook_username" 
						value="{facebook}">
					<span class="note">username only</span>
				</p>

				<p>
					<label for="github_username">GitHub:</label>	
					<input 
						type="text" 
						id="github_username" 
						name="github_username" 
						value="{github}">
					<span class="note">username only</span>
				</p>

				<p>
					<label for="dribbble_username">Dribble:</label>	
					<input 
						type="text" 
						id="dribbble_username" 
						name="dribbble_username" 
						value="{dribbble}">
					<span class="note">username only</span>
				</p>

				<p>
					<label for="googleplus">Google+:</label>	
					<input 
						type="text" 
						id="googleplus" 
						name="googleplus" 
						value="{googleplus}">
					<span class="note">until this gets smarter, add the whole URL for your profile</span><br>
					<span class="note">example 1: http://google.com/+TimMurtaugh</span><br>
					<span class="note">example 2: https://plus.google.com/104877852135164107223‎</span><br>
				</p>

			</fieldset>

			<fieldset>
				
				<p>
					<label for="bio">Bio</label>
					<textarea id="bio" name="bio" data-autoresize style="height: 100px;">{bio}</textarea>
					<span class="note">links encouraged</span>
				</p>
				
			</fieldset>

			<p class="screen-reader">
				<label for="honeepot">Don't put anything here</label>
				<input
					type="text"
					id="honeepot"
					name="honeepot">
			</p>
			
			<p>
				<input 
					type="submit" 
					name="submit" 
					value="Submit" 
					class="button primary">
			</p>

		{/exp:user:edit}

		<hr class="spacer large">

		{exp:user:edit
			dynamic="off"
			return="/edit/profile/"
			form:class="perfect-form-demo"}

			<fieldset>

				<legend class="form-heading">Avatar</legend> 

				<p>Avatars should be square, and at least 200x200. If you sign in via Twitter, we probably grabbed your avatar from there. You can replace it.</p>

				<figure>
				{if avatar_filename != ""}
					<img src="{avatar_url}{avatar_filename}">
					{if avatar_width < "201" OR avatar_height < "201"}
					<span class="note">(at {avatar_width}x{avatar_height} this avatar is smaller than we would like)</span>
					{/if}
				{if:else}
					<img src="{assets_path}img/avatar_generic-commenter_grey.png">
				{/if}
				</figure>

				<p>
					<label for="avatar_filename">Upload an avatar:</label>
					<input 
						type="file" 
						id="avatar_filename" 
						name="avatar_filename">
				</p>

			</fieldset>

			<p>
				<input 
					type="submit" 
					name="submit" 
					value="Submit" 
					class="button primary">
			</p>

		{/exp:user:edit}

		{if group_id == "1" OR group_id == "6" OR group_id == "7" OR group_id == "10"}

		<hr class="spacer large">

		{exp:user:edit
			dynamic="off"
			return="/edit/profile/"
			form:class="perfect-form-demo"}

			<fieldset>

				<legend class="form-heading">Author Photo</legend>

				<p>Author photos should be at least 250x250. Our editors may crop and resize if needed.</p>

				<figure>
				{if photo_filename != ""}
					<img style="max-width: 100%;" src="{photo_url}{photo_filename}" />
					{if photo_width < "400" OR photo_height < "400"}
					<span class="note">(at {photo_width}x{photo_height} this photo is smaller than we would like)</span>
					{/if}
				{/if}
				</figure>

				<p>
					<label for="photo_filename">Upload photo:</label>
					<input 
						type="file" 
						id="photo_filename" 
						name="photo_filename">
				</p>

			</fieldset>

			<p>
				<input 
					type="submit" 
					name="submit" 
					value="Submit" 
					class="button primary">
			</p>

{/exp:user:edit}

{/if}

		</div>

	</div>

</div>

{global-footer}

{sponsor-top}

{global-page-bottom}

{/if}

{/exp:ifelse}